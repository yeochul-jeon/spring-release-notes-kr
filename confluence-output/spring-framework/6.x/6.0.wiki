h1. Spring Framework 6.0 릴리즈 노트

Spring Framework 6.0은 2022년 11월에 릴리즈된 메이저 버전으로, Spring 역사상 가장 큰 변화를 담고 있습니다. {{javax.\*}}에서 {{jakarta.\*}}로의 네임스페이스 전환, Java 17 기준선 상향, GraalVM 네이티브 이미지를 위한 AOT 컴파일 지원이 핵심입니다. [Spring Boot 3.0|../../spring-boot/3.x/3.0.md]의 기반 프레임워크입니다.

----

h2. 주요 변경사항

h3. 기준선(Baseline) 요구사항

Spring Framework 6.0이 요구하는 최소 환경입니다.

|| 항목 || 요구사항 ||
| *Java* | 17+ |
| *Jakarta EE* | 9+ (EE 10 호환) |
| *Servlet* | 5.0+ (Tomcat 10+, Jetty 11+) |
| *JPA* | 3.0+ (Hibernate ORM 5.6.x jakarta 또는 6.1+) |
| *Bean Validation* | 3.0+ (Hibernate Validator 7.0+) |
| *Jackson* | 2.14+ |
| *Kotlin* | 1.7+ |
| *Micrometer* | 1.10+ |
| *GraalVM* | 22.3+ |

{quote}
*초보자 안내:* 기준선(Baseline)이란 "최소한 이 버전 이상이어야 동작한다"는 의미입니다. 예를 들어 Java 11로는 Spring Framework 6.0을 사용할 수 없습니다.
{quote}

h3. Jakarta EE 네임스페이스 전환

Spring Framework 6.0의 가장 핵심적인 변경사항입니다. Java EE가 Eclipse Foundation으로 이관되면서 패키지 이름이 {{javax.\*}}에서 {{jakarta.\*}}로 바뀌었고, Spring 6.0은 이 새로운 네임스페이스를 채택했습니다.

*변경 전 (Spring 5.x) → 변경 후 (Spring 6.0):*

{code:language=java|theme=Emacs}
// Before                                  // After
import javax.servlet.http.HttpServletRequest;  → import jakarta.servlet.http.HttpServletRequest;
import javax.persistence.Entity;               → import jakarta.persistence.Entity;
import javax.persistence.Id;                   → import jakarta.persistence.Id;
import javax.validation.constraints.NotNull;   → import jakarta.validation.constraints.NotNull;
{code}

{quote}
*주의:* {{javax.sql.\*}}이나 {{javax.crypto.\*}}처럼 Java SE에 포함된 패키지는 변경되지 않습니다. 변경 대상은 Java EE에서 관리하던 {{javax.servlet}}, {{javax.persistence}}, {{javax.validation}} 등입니다.
{quote}

{code:language=text|title=mermaid|collapse=true|theme=Emacs}
graph LR
    subgraph "Spring 5.x (이전)"
        A[javax.servlet]
        B[javax.persistence]
        C[javax.validation]
        D[javax.annotation]
    end

    subgraph "Spring 6.0 (현재)"
        E[jakarta.servlet]
        F[jakarta.persistence]
        G[jakarta.validation]
        H[jakarta.annotation]
    end

    A -->|마이그레이션| E
    B -->|마이그레이션| F
    C -->|마이그레이션| G
    D -->|마이그레이션| H

    style E fill:#4CAF50,color:#fff
    style F fill:#4CAF50,color:#fff
    style G fill:#4CAF50,color:#fff
    style H fill:#4CAF50,color:#fff
{code}

h3. AOT(Ahead-of-Time) 컴파일 및 GraalVM 네이티브 이미지 지원

AOT 컴파일이란 애플리케이션을 *실행하기 전에 미리 분석하고 최적화*하는 기술입니다. 기존에는 런타임(실행 시점)에 리플렉션으로 빈을 등록하고 프록시를 생성했지만, AOT는 이를 빌드 시점으로 앞당깁니다.

이를 통해 GraalVM 네이티브 이미지(JVM 없이 실행되는 독립 실행 파일)를 만들 수 있어 시작 시간이 수십 밀리초 수준으로 단축됩니다.

{code:language=text|title=mermaid|collapse=true|theme=Emacs}
graph TD
    subgraph "기존 JVM 방식"
        A1[애플리케이션 시작] --> A2[클래스 스캔]
        A2 --> A3[리플렉션으로 빈 등록]
        A3 --> A4[프록시 생성]
        A4 --> A5[실행 준비 완료]
    end

    subgraph "AOT 방식"
        B1[빌드 시점: AOT 처리] --> B2[빈 정의 코드 생성]
        B2 --> B3[리플렉션 힌트 수집]
        B3 --> B4[네이티브 이미지 빌드]
        B4 --> B5[즉시 실행 가능]
    end

    style B5 fill:#4CAF50,color:#fff
    style A5 fill:#FFC107,color:#000
{code}

핵심 API인 {{GenericApplicationContext.refreshForAotProcessing()}}은 빌드 시점에 애플리케이션 컨텍스트를 분석하여 필요한 빈 정의와 리플렉션 힌트를 미리 생성합니다.

{code:language=java|theme=Emacs}
// AOT 처리 과정 (빌드 시점에 실행됨)
GenericApplicationContext context = new AnnotationConfigApplicationContext();
context.register(MyAppConfig.class);

// AOT 처리 — 빈 정의를 분석하고 코드를 생성
context.refreshForAotProcessing(new RuntimeHints());

// 실제 사용 시에는 Spring Boot 3.0의 빌드 플러그인이 이 과정을 자동으로 수행합니다.
{code}

{quote}
*초보자 안내:* 일반적으로 AOT를 직접 호출할 필요는 없습니다. Spring Boot 3.0의 Gradle/Maven 플러그인이 {{./gradlew nativeCompile}} 또는 {{mvn \-Pnative package}} 명령으로 자동 처리합니다.
{quote}

h3. HTTP Interface Client (@HttpExchange)

외부 API 호출을 위한 *선언적 HTTP 클라이언트*입니다. 인터페이스와 어노테이션만으로 HTTP 요청을 정의할 수 있어 코드가 훨씬 간결해집니다.

{code:language=java|theme=Emacs}
// 1. HTTP 서비스 인터페이스 정의
public interface UserService {

    @GetExchange("/users/{id}")
    User getUser(@PathVariable Long id);

    @GetExchange("/users")
    List<User> getAllUsers();

    @PostExchange("/users")
    User createUser(@RequestBody User user);

    @DeleteExchange("/users/{id}")
    void deleteUser(@PathVariable Long id);
}

// 2. 프록시 생성 및 사용
@Configuration
public class ClientConfig {

    @Bean
    UserService userService() {
        WebClient webClient = WebClient.builder()
            .baseUrl("https://api.example.com")
            .build();

        HttpServiceProxyFactory factory = HttpServiceProxyFactory
            .builderFor(WebClientAdapter.create(webClient))
            .build();

        return factory.createClient(UserService.class);
    }
}

// 3. 주입 후 일반 메서드처럼 사용 — userService.getUser(1L) → GET /users/1 호출
{code}

h3. Micrometer 기반 관찰 가능성(Observability) 통합

관찰 가능성(Observability)이란 애플리케이션의 동작을 외부에서 측정하고 추적할 수 있는 능력입니다. Spring 6.0은 Micrometer와 Micrometer Tracing을 직접 통합하여, {{RestTemplate}}, {{WebClient}}, {{Spring MVC}}, {{WebFlux}} 등에서 메트릭(지표)과 트레이스(추적)가 자동 수집됩니다.

h3. RFC 7807 Problem Details 지원

API에서 오류가 발생했을 때 *표준화된 형식*으로 에러 정보를 응답할 수 있습니다. RFC 7807은 HTTP API의 오류 응답 포맷을 정의한 국제 표준입니다.

{code:language=java|theme=Emacs}
@RestControllerAdvice
public class GlobalExceptionHandler {

    @ExceptionHandler(MemberNotFoundException.class)
    ProblemDetail handleNotFound(MemberNotFoundException ex) {
        ProblemDetail problem = ProblemDetail.forStatusAndDetail(
            HttpStatus.NOT_FOUND, ex.getMessage()
        );
        problem.setTitle("회원을 찾을 수 없습니다");
        problem.setProperty("memberId", ex.getMemberId());
        return problem;
    }
}
{code}

응답 예시:

{code:language=json|theme=Emacs}
{
  "type": "about:blank",
  "title": "회원을 찾을 수 없습니다",
  "status": 404,
  "detail": "ID 42에 해당하는 회원이 없습니다",
  "memberId": 42
}
{code}

h3. PathPatternParser 기본 적용 및 후행 슬래시 매칭 변경

URL 경로 매칭 파서가 기존 {{AntPathMatcher}}에서 {{PathPatternParser}}로 변경되어 성능과 정밀도가 향상되었습니다. 또한 *더 이상 {{/users/}}가 {{/users}}와 자동 매칭되지 않습니다.* 6.0부터는 후행 슬래시를 명시적으로 구분합니다.

{code:language=java|theme=Emacs}
@GetMapping("/users")
public List<User> getUsers() { ... }
// /users  → 200 OK
// /users/ → 404 Not Found (6.0부터)
{code}

----

h2. 새로운 기능 요약

위에서 상세히 다룬 항목 외에 주요 신규 기능을 정리합니다.

* \{\{@HttpExchange\}\} 기반 선언적 HTTP 클라이언트
* Micrometer 기반 관찰 가능성 프레임워크 통합
* \{\{ProblemDetail\}\} 클래스를 통한 RFC 7807 표준 에러 응답
* GraalVM 네이티브 이미지를 위한 AOT 처리 엔진
* \{\{PathPatternParser\}\} 기본 적용으로 빠르고 정밀한 URL 패턴 매칭

----

h2. 개선사항

|| 영역 || 개선 내용 ||
| *SpEL(표현식 언어)* | 보안 강화 및 성능 최적화 |
| *의존성 주입* | 생성자 기반 주입의 내부 최적화 |
| *WebFlux* | 리액티브 스트림 처리 성능 향상 |
| *테스트* | {{MockMvc}}에서 비동기 디스패치 처리 개선 |
| *코어* | Java 17 {{record}}, {{sealed class}} 등 최신 문법 대응 |

----

h2. 폐기(Deprecated) 및 제거(Removed) 항목

h3. 폐기 예고 (Deprecated)

|| 항목 || 대안 ||
| {{ListenableFuture}} | {{CompletableFuture}} (Java 8 표준) |
| {{LocalVariableTableParameterNameDiscoverer}} | 컴파일 시 {{\-parameters}} 플래그 사용 |
| 후행 슬래시 자동 매칭 | 명시적 경로 매핑 사용 |

{quote}
*{{\-parameters}} 플래그 안내:* 메서드 파라미터 이름을 런타임에 알기 위해 이전에는 디버그 정보({{.class}} 파일의 로컬 변수 테이블)를 읽었지만, 이제는 컴파일 시 {{\-parameters}} 옵션을 추가하는 것이 권장됩니다. Gradle에서는 다음과 같이 설정합니다.

{code:language=groovy|theme=Emacs}
tasks.withType(JavaCompile).configureEach {
    options.compilerArgs.add("-parameters")
}
{code}
{quote}

h3. 제거됨 (Removed)

|| 항목 || 설명 ||
| *RPC 스타일 리모팅* | Hessian, HTTP Invoker, JMS Invoker, JAX-WS 지원 제거 |
| *EJB 접근* | EJB 클라이언트 지원 제거 |
| *Joda-Time* | {{java.time}} (JSR 310) 사용 권장 |
| *Ehcache 2.x* | Ehcache 3.x 또는 Caffeine 사용 |
| *JCA CCI* | 제거 |
| *Commons FileUpload* | Servlet 3.0+ 표준 멀티파트 지원 사용 ({{StandardServletMultipartResolver}}) |
| *Tiles / JSP 관련* | FreeMarker 등 대안 템플릿 엔진 사용 |

----

h2. 호환성

{code:language=text|title=mermaid|collapse=true|theme=Emacs}
graph TD
    SF6[Spring Framework 6.0] --> JDK[JDK 17+]
    SF6 --> JEE[Jakarta EE 9+ / 10]
    SF6 --> SB3[Spring Boot 3.0]

    JEE --> S50[Servlet 5.0+]
    JEE --> JPA30[JPA 3.0+]
    JEE --> BV30[Bean Validation 3.0+]

    S50 --> TC10[Tomcat 10+]
    S50 --> JT11[Jetty 11+]

    JPA30 --> HB56[Hibernate 5.6.x jakarta]
    JPA30 --> HB61[Hibernate 6.1+]

    SF6 --> KT17[Kotlin 1.7+]
    SF6 --> GVM[GraalVM 22.3+]
    SF6 --> JK214[Jackson 2.14+]
    SF6 --> MM110[Micrometer 1.10+]
{code}

h3. Spring 포트폴리오 호환

* [Spring Boot 3.0|../../spring-boot/3.x/3.0.md] — Spring Framework 6.0 기반
* Spring Security 6.0
* Spring Data 2022.0 (Turing)
* Spring Cloud 2022.0 (Kilburn)

----

h2. 참고 자료

* [Spring Framework 6.0 Release Notes (GitHub Wiki)|https://github.com/spring-projects/spring-framework/wiki/Spring-Framework-6.0-Release-Notes]
* [What's New in Spring Framework 6.x (GitHub Wiki)|https://github.com/spring-projects/spring-framework/wiki/What's-New-in-Spring-Framework-6.x]
* [Upgrading to Spring Framework 6.x (GitHub Wiki)|https://github.com/spring-projects/spring-framework/wiki/Upgrading-to-Spring-Framework-6.x]
* [Spring Boot 3.0 Migration Guide (GitHub Wiki)|https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0-Migration-Guide]
* [Spring Blog - Spring Framework 6.0 goes GA|https://spring.io/blog/2022/11/16/spring-framework-6-0-goes-ga]
