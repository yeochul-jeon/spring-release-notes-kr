h1. Spring Framework 7.0 릴리즈 노트

Spring Framework 7.0은 Jakarta EE 11을 기반으로 하며, 내장 API 버전 관리, 복원력(Resilience) 기능, JSpecify null 안전성 등 차세대 기능을 도입한 메이저 버전입니다. 2025년 11월에 GA로 릴리즈되었으며, Spring Boot 4.0의 기반 프레임워크입니다.

----

h2. 주요 변경사항

h3. Jakarta EE 11 기반

Spring Framework 7.0은 Jakarta EE 11로 기준선(baseline)을 올렸습니다.

|| 항목 || 요구사항 ||
| *Java* | 17+ (JDK 25 권장) |
| *Jakarta EE* | 11 |
| *Servlet* | 6.1 (Tomcat 11.0, Jetty 12.1) |
| *JPA* | 3.2 (Hibernate ORM 7.1/7.2) |
| *Bean Validation* | 3.1 (Hibernate Validator 9.0/9.1) |
| *WebSocket* | 2.2 |
| *Kotlin* | 2.2 |
| *GraalVM* | 25 |
| *Jackson* | 3.x 기본 (2.x 폴백) |

{quote}
*참고:* Undertow는 Servlet 6.1을 지원하지 않아 더 이상 지원되지 않습니다. Tomcat 11.0 또는 Jetty 12.1을 사용하세요.
{quote}

h3. API 버전 관리 (네이티브 지원)

Spring MVC와 WebFlux에서 REST API 버전 관리를 프레임워크 수준에서 지원합니다. {{@RequestMapping}} 계열 어노테이션에 {{version}} 속성이 추가되었습니다.

{code:language=java|theme=Emacs}
@RestController
@RequestMapping("/api/orders")
public class OrderController {

    // 버전 1 전용 엔드포인트
    @GetMapping(path = "/{id}", version = "1")
    Map<String, Object> getOrderV1(@PathVariable String id) {
        return Map.of("orderId", id, "version", "1");
    }

    // 버전 1.1 이상 엔드포인트
    @GetMapping(path = "/{id}", version = "1.1+")
    Map<String, Object> getOrderV11(@PathVariable String id) {
        return Map.of("orderId", id, "version", "1.1", "details", "확장 정보");
    }
}
{code}

버전 전략 설정 (헤더, 경로, 쿼리 파라미터, 미디어 타입 중 선택):

{code:language=java|theme=Emacs}
@Configuration
public class WebConfig implements WebMvcConfigurer {
    @Override
    public void configureApiVersioning(ApiVersionConfigurer configurer) {
        configurer
            .setVersionRequired(true)
            .useRequestHeader("X-API-VERSION");
    }
}
{code}

h3. 내장 복원력 (Resilience)

외부 라이브러리 없이 재시도와 동시성 제한을 지원합니다.

{code:language=java|theme=Emacs}
@Configuration
@EnableResilientMethods
public class AppConfig { }

@Service
class PaymentService {

    // 최대 4회 재시도, 지수 백오프, 동시 실행 3개 제한
    @Retryable(maxAttempts = 4, delay = 100, multiplier = 2, maxDelay = 1000)
    @ConcurrencyLimit(3)
    public String charge(String id) {
        return callExternalPaymentApi(id);
    }
}
{code}

* \{\{RetryTemplate\}\}, \{\{RetryPolicy\}\} — \{\{org.springframework.core.retry\}\} 패키지
* \{\{@Retryable\}\} — 리액티브 환경 자동 적응
* \{\{@ConcurrencyLimit\}\} — 메서드 또는 클래스 단위 동시성 제한

----

h2. 새로운 기능

h3. BeanRegistrar (프로그래밍 방식 빈 등록)

{{BeanRegistrar}} 인터페이스로 환경 변수에 따른 동적 빈 등록이 가능합니다.

{code:language=java|theme=Emacs}
@Configuration
@Import(MyBeanRegistrar.class)
public class AppConfig { }

class MyBeanRegistrar implements BeanRegistrar {
    @Override
    public void register(BeanRegistry registry, Environment env) {
        registry.registerBean(MyService.class);
        registry.registerBean("customService", MyService.class, spec -> spec
            .prototype()
            .lazyInit()
        );
    }
}
{code}

{quote}
*주의:* {{@Bean}}이 아닌 {{@Import}}를 통해 등록해야 합니다.
{quote}

h3. JSpecify 기반 Null Safety

JSR 305에서 JSpecify 어노테이션으로 전면 전환했습니다.

* 패키지 레벨 \{\{@NullMarked\}\}로 기본 non-null 선언
* null 허용이 필요한 곳에만 \{\{@Nullable\}\} 명시
* 제네릭 타입, 배열, 가변 인자에도 적용 가능
* Kotlin 2.2가 JSpecify 어노테이션을 자동으로 Kotlin null 안전성으로 변환

h3. Jackson 3.x 지원

* 기본 JSON 매퍼가 \{\{ObjectMapper\}\} → \{\{JsonMapper\}\}로 변경
* 속성 알파벳순 정렬 기본 활성화
* 날짜를 ISO-8601 문자열로 기본 직렬화
* Jackson 2.x는 폴백 지원 (7.2에서 제거 예정)

h3. RestTestClient

{{MockMvc}}, {{WebTestClient}}, {{TestRestTemplate}}을 하나의 일관된 API로 통합하는 테스트 클라이언트입니다. 라이브 서버와 목(Mock) 설정 모두 지원합니다.

h3. HttpHeaders API 재설계

{{HttpHeaders}} 클래스가 더 이상 {{MultiValueMap}}을 확장하지 않습니다. {{HttpHeaders#asMultiValueMap()}} 폴백이 제공되지만 즉시 deprecated 처리되었습니다.

h3. HTTP 인터페이스 클라이언트 향상

* \{\{@ImportHttpServices\}\}로 그룹 기반 설정
* 요청/응답 본문에 \{\{InputStream\}\}/\{\{OutputStream\}\} 지원

h3. JmsClient 도입

{{JmsMessagingTemplate}}의 현대적 대안으로 설계된 새로운 메시징 클라이언트입니다.

h3. 기타 신규 기능

* *PathPattern 향상*: 경로 시작 부분에서 \{\{"/\*\*/pages/index.html"\}\} 같은 다중 세그먼트 매칭 지원
* *Class-File API*: Java 24+의 JEP 484를 활용한 바이트코드 분석
* *WebFlux Gson 지원*: 새로운 \{\{GsonEncoder\}\}/\{\{GsonDecoder\}\} 코덱
* *Optional SpEL 향상*: \{\{java.util.Optional\}\}에 대한 null-safe 연산자 지원
* *Kotlin 코루틴 컨텍스트 전파*: \{\{PropagationContextElement\}\}를 통한 자동 전파
* *프록시 설정 개선*: \{\{@Proxyable\}\} 어노테이션으로 빈별 프록시 설정

----

h2. 개선사항

h3. 성능

|| 영역 || 개선 내용 ||
| GraalVM 25 | 단일 파일 도달성 메타데이터 포맷으로 전환 |
| Spring Data AOT | 쿼리 생성을 컴파일 타임으로 이동 (시작 시간 50~70% 개선) |
| 테스트 컨텍스트 | 미사용 애플리케이션 컨텍스트 자동 일시 중지로 메모리 절감 |
| 리소스 힌트 | glob 포맷 패턴 문법 적용 |

h3. 테스트

* \{\{@Nested\}\} 테스트 클래스에서 생성자/필드 의존성 주입 일관 지원
* 비싱글톤 빈에 대한 빈 오버라이드 지원
* JUnit 6 지원

----

h2. 폐기(Deprecated) 및 제거(Removed) 항목

h3. 제거됨

|| 항목 || 대안 ||
| {{spring\-jcl}} 모듈 | Apache Commons Logging 1.3.0 |
| {{javax.annotation}} / {{javax.inject}} | {{jakarta.annotation}} / {{jakarta.inject}} |
| Undertow 지원 | Tomcat 11.0 / Jetty 12.1 |
| {{ListenableFuture}} | {{CompletableFuture}} |
| 경로 확장자 기반 콘텐츠 협상 | PathPattern 사용 |
| WebJars 지원 | 제거 |
| OkHttp3 지원 | 제거 |
| Theme 지원 | 제거 |

h3. 폐기 예고

|| 항목 || 예정 ||
| {{RestTemplate}} | 7.1에서 {{@Deprecated}} 예정 |
| {{<mvc:\*>}} XML 네임스페이스 | Java 설정 사용 권장 |
| Jackson 2.x | 7.1 deprecated → 7.2 제거 |
| {{PathMatcher}} (AntPathMatcher) | {{PathPattern}} 사용 |
| JUnit 4 지원 | JUnit Jupiter 사용 권장 |
| 문서 뷰 클래스 (XLS, RSS, PDF) | 폐기 예정 |

----

h2. 호환성

{code:language=text|title=mermaid|collapse=true|theme=Emacs}
graph TD
    SF7[Spring Framework 7.0] --> JDK[JDK 17+]
    SF7 --> JEE[Jakarta EE 11]
    SF7 --> SB4[Spring Boot 4.0]

    JEE --> S61[Servlet 6.1]
    JEE --> JPA32[JPA 3.2]
    JEE --> BV31[Bean Validation 3.1]

    S61 --> TC11[Tomcat 11.0]
    S61 --> JT121[Jetty 12.1]

    JPA32 --> HB71[Hibernate ORM 7.1/7.2]

    SF7 --> KT22[Kotlin 2.2]
    SF7 --> GVM25[GraalVM 25]
    SF7 --> JK3[Jackson 3.x]
{code}

h3. Spring 포트폴리오 호환

* Spring Boot 4.0
* Spring Security 7.0
* Spring Cloud 2025.1.0
* Spring Data 2025.1.1.0

----

h2. 참고 자료

* [Spring Framework 7.0 Release Notes (GitHub Wiki)|https://github.com/spring-projects/spring-framework/wiki/Spring-Framework-7.0-Release-Notes]
* [What's New in Spring Framework 7.x (GitHub Wiki)|https://github.com/spring-projects/spring-framework/wiki/What's-New-in-Spring-Framework-7.x]
* [Spring Framework 7 and Spring Boot 4 - InfoQ|https://www.infoq.com/news/2025/11/spring-7-spring-boot-4/]
* [Spring Boot 4 and Spring Framework 7 - Loiane|https://loiane.com/2025/08/spring-boot-4-spring-framework-7-key-features/]
* [Spring Boot 4.0 Migration Guide (GitHub Wiki)|https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-4.0-Migration-Guide]
